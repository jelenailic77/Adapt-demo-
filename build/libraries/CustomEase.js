import{stringToRawPath as stringToRawPath,rawPathToString as rawPathToString,transformRawPath as transformRawPath}from"./utils/paths.js";var gsap,_coreInitted,_getGSAP=function(){return gsap||"undefined"!=typeof window&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_initCore=function(){(gsap=_getGSAP())?(gsap.registerEase("_CE",CustomEase.create),_coreInitted=1):console.warn("Please gsap.registerPlugin(CustomEase)")},_bigNum=1e20,_round=function(t){return~~(1e3*t+(t<0?-.5:.5))/1e3},_bonusValidated=1,_numExp=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,_needsParsingExp=/[cLlsSaAhHvVtTqQ]/g,_findMinimum=function(t){for(var e=t.length,n=_bigNum,a=1;a<e;a+=6)+t[a]<n&&(n=+t[a]);return n},_normalize=function(t,e,n){n||0===n||(n=Math.max(+t[t.length-1],+t[1]));for(var a=-1*+t[0],s=-n,i=t.length,r=1/(+t[i-2]+a),o=(o=-e||(Math.abs(+t[i-1]-+t[1])<.01*(+t[i-2]-+t[0])?_findMinimum(t)+s:+t[i-1]+s))?1/o:-r,u=0;u<i;u+=2)t[u]=(+t[u]+a)*r,t[u+1]=(+t[u+1]+s)*o},_bezierToPoints=function t(e,n,a,s,i,r,o,u,g,h,c){var x=(e+a)/2,f=(n+s)/2,p=(a+i)/2,d=(s+r)/2,m=(i+o)/2,l=(r+u)/2,y=(x+p)/2,_=(f+d)/2,P=(p+m)/2,E=(d+l)/2,w=(y+P)/2,C=(_+E)/2,p=o-e,d=u-n,s=Math.abs((a-o)*d-(s-u)*p),r=Math.abs((i-o)*d-(r-u)*p);return h||(h=[{x:e,y:n},{x:o,y:u}],c=1),h.splice(c||h.length-1,0,{x:w,y:C}),g*(p*p+d*d)<(s+r)*(s+r)&&(r=h.length,t(e,n,x,f,y,_,w,C,g,h,c),t(w,C,P,E,m,l,o,u,g,h,c+1+(h.length-r))),h},CustomEase=function(){function l(t,e,n){_coreInitted||_initCore(),this.id=t,_bonusValidated&&this.setData(e,n)}var t=l.prototype;return t.setData=function(t,e){e=e||{};var n,a,s,i,r,o,u,g,h,c=(t=t||"0,0,1,1").match(_numExp),x=1,f=[],p=[],d=e.precision||1,m=d<=1;if(this.data=t,(_needsParsingExp.test(t)||~t.indexOf("M")&&t.indexOf("C")<0)&&(c=stringToRawPath(t)[0]),4===(n=c.length))c.unshift(0,0),c.push(1,1),n=8;else if((n-2)%6)throw"Invalid CustomEase";for(0==+c[0]&&1==+c[n-2]||_normalize(c,e.height,e.originY),this.segment=c,i=2;i<n;i+=6)a={x:+c[i-2],y:+c[i-1]},s={x:+c[i+4],y:+c[i+5]},f.push(a,s),_bezierToPoints(a.x,a.y,+c[i],+c[i+1],+c[i+2],+c[i+3],s.x,s.y,1/(2e5*d),f,f.length-1);for(n=f.length,i=0;i<n;i++)u=f[i],g=f[i-1]||u,(u.x>g.x||g.y!==u.y&&g.x===u.x||u===g)&&u.x<=1?(g.cx=u.x-g.x,g.cy=u.y-g.y,g.n=u,g.nx=u.x,m&&1<i&&2<Math.abs(g.cy/g.cx-f[i-2].cy/f[i-2].cx)&&(m=0),g.cx<x&&(g.cx?x=g.cx:(g.cx=.001,i===n-1&&(g.x-=.001,x=Math.min(x,.001),m=0)))):(f.splice(i--,1),n--);if(r=1/(n=1/x+1|0),u=f[o=0],m){for(i=0;i<n;i++)a=(u=u.nx<(h=i*r)?f[++o]:u).y+(h-u.x)/u.cx*u.cy,p[i]={x:h,cx:r,y:a,cy:0,nx:9},i&&(p[i-1].cy=a-p[i-1].y);p[n-1].cy=f[f.length-1].y-a}else{for(i=0;i<n;i++)u.nx<i*r&&(u=f[++o]),p[i]=u;o<f.length-1&&(p[i-1]=f[f.length-2])}return this.ease=function(t){var e=p[t*n|0]||p[n-1];return(e=e.nx<t?e.n:e).y+(t-e.x)/e.cx*e.cy},(this.ease.custom=this).id&&gsap&&gsap.registerEase(this.id,this.ease),this},t.getSVGData=function(t){return l.getSVGData(this,t)},l.create=function(t,e,n){return new l(t,e,n).ease},l.register=function(t){gsap=t,_initCore()},l.get=function(t){return gsap.parseEase(t)},l.getSVGData=function(t,e){var n,a,s,i,r,o,u,g,h,c,x=(e=e||{}).width||100,f=e.height||100,p=e.x||0,d=(e.y||0)+f,m=gsap.utils.toArray(e.path)[0];if(e.invert&&(f=-f,d=0),(t=(t="string"==typeof t?gsap.parseEase(t):t).custom?t.custom:t)instanceof l)n=rawPathToString(transformRawPath([t.segment],x,0,0,-f,p,d));else{for(n=[p,d],i=1/(u=Math.max(5,200*(e.precision||1))),g=5/(u+=2),h=_round(p+i*x),a=((c=_round(d+t(i)*-f))-d)/(h-p),s=2;s<u;s++)r=_round(p+s*i*x),o=_round(d+t(s*i)*-f),(Math.abs((o-c)/(r-h)-a)>g||s===u-1)&&(n.push(h,c),a=(o-c)/(r-h)),h=r,c=o;n="M"+n.join(",")}return m&&m.setAttribute("d",n),n},l}();_getGSAP()&&gsap.registerPlugin(CustomEase),CustomEase.version="3.10.3";export{CustomEase as CustomEase,CustomEase as default};